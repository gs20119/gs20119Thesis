올바른 유체시뮬레이션의 목표 = 정보의 축소
입자 각각을 분석하는 것은 의미가 없다 : 이유 = 카오스계이기 때문에 조금만 달라져도 궤적이 완전 달라짐
하지만 중요한 것은 전체적인 경향성을 보는 것임 : 어떻게?
만약 공간 내에서 '평형' 상태에 있는 유체라면 그 안에서 입자들의 위치/속력 "분포"가 시간에 따라 일정하게 유지된다. 
각 입자들의 위치/속도를 하나씩 시뮬레이션 하는 대신 일정한 분포 하나로 고정해서 생각할 수 있다!
힘이 주어진 경우라면 : 부분공간을 쪼개어서 각 공간 안에서 유체가 평형이라고 가정

하지만 일반적인 경우에서는 부분공간을 어떻게 잡아도 시간이 지나도 평형 상태가 잘 나오지 않음 
예를 들어 : 왼쪽에서 오른쪽으로 입자 떼가 이동하는 경우 
부분공간의 길이랑 무관하게 입자가 이동하는 동안 분포가 변하며, 길이가 너무 작으면 입자 수가 적어 분포의 의미가 부족함
그러므로 이렇게 평형을 고집하는 방법에는 한계가 있으며, 일반화를 위한 요소를 모델에 추가해야 한다. 

우리는 지금까지 정확한 입자별 시뮬레이션을 입자를 사용하지 않고 대체할 방법을 찾고 있었다.
하지만 전체적인 경향성을 확인하는 것이 목적이며, 이를 위하여 분포를 여전히 사용할 것이다.
f(x,y,vx,vy,t)라는 확률밀도함수를 정의하여 시간에 따른 위치/속도 분포로 생각해 보자. (전에는 t에 대해 일정할 것이라 생각했음)
또는 이를 입맛에 맞게 변형하여 유체를 연속체라고 가정하고 (x,y)를 포함하는 매우 작은 영역에서 
시간에 따른 (질량)밀도 Field p(x,y,t)와 평균 속도 Field u(x,y,t)로 나누어서 생각할 수도 있다.
이렇게 되면 어떤 흐름이 주어져도 유체의 상태에 관한 정보를 잃지 않으면서 시뮬레이션할 수 있다.
또한, 평균운동에너지를 밀도로 나눈 값을 온도 Field T(x,y,t)로 사용할 수 있다.
 
이제 충돌을 처리해보자. 충돌은 운동량의 변화를 일으키고, 동역학의 기본법칙인 d(mv) = Fdt에 입각하여 처리해야 한다.
이 공식은 곧 운동량의 변화율이 힘이라는 것을 의미하고, 또한 힘을 면적으로 나누면 압력이 된다.
우리는 입자의 평균적인 충돌 현상을 영역에서의 압력 Field P(x,y,t)로 대체할 수 있다.

https://www.youtube.com/watch?v=4b80sR-joNY 33:40 참고
이렇게 유체의 상태를 밀도, 속도, 온도, 압력 네 가지의 장으로 줄여서 표현할 수 있다는 사실을 알게 되었다.
그리고 유체를 시뮬레이션하려면 rules of evolution, 즉 시간에 따라 각 장이 어떻게 변화하는지 법칙을 제시해 주어야 한다.
이제 네 가지의 장을 공통적인 법칙을 통해 하나로 묶을 차례만이 남았다.
1. p의 현재 변화율은 위치에 대한 p의 Gradient와 같다. (질량연속)
2. 뉴턴 2법칙에 의해 f = p(du/dt)이고,  = P의 Divergence + 점성 * u의 Laplacian (운동량연속)
3. 열역학 1법칙 (에너지연속)



https://openprocessing.org/sketch/43171

